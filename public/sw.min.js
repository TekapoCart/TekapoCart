const PRECACHE="tc-precache-v3",RUNTIME="tc-runtime-v3",PRECACHE_URLS=[],CACHE_PATHS=[/\/img\/.*/,/\/themes\/.*\/assets\/css\/.*/,/\/themes\/.*\/assets\/cache\/.*/];function pathComparer(e,t){return e.match(new RegExp(t))}function comparePaths(e,t){if(e)for(let n=0;n<t.length;n++){if(pathComparer(e,t[n]))return!0}return!1}self.addEventListener("install",e=>{e.waitUntil(caches.open(PRECACHE).then(e=>e.addAll(PRECACHE_URLS)).then(self.skipWaiting()))}),self.addEventListener("activate",e=>{const t=[PRECACHE,RUNTIME];e.waitUntil(async function(){self.registration.navigationPreload,caches.keys().then(e=>e.filter(e=>!t.includes(e))).then(e=>Promise.all(e.map(e=>caches.delete(e)))).then(()=>self.clients.claim())}())}),self.addEventListener("fetch",e=>{"GET"===e.request.method&&-1===e.request.url.indexOf("/tekapo")&&-1===e.request.url.indexOf("/order")&&-1===e.request.url.indexOf("www.facebook.com")&&-1===e.request.url.indexOf("connect.facebook.net")&&-1===e.request.url.indexOf("www.google-analytics.com")&&-1===e.request.url.indexOf("www.googletagmanager.com")&&-1===e.request.url.indexOf("stats.g.doubleclick.net")&&e.respondWith(async function(){if(comparePaths(e.request.url,CACHE_PATHS)){const t=await caches.match(e.request);if(t)return t;const n=await e.preloadResponse;return n||fetch(e.request).then(t=>caches.open(RUNTIME).then(n=>n.put(e.request,t.clone()).then(()=>t))).catch(function(e){return Promise.reject("no-connection")})}{const t=await e.preloadResponse;return t||fetch(e.request).then(function(t){return caches.open(RUNTIME).then(n=>n.put(e.request,t.clone()).then(()=>t))}).catch(function(t){return caches.open(RUNTIME).then(t=>t.match(e.request).then(e=>e&&404!==e.status?e:Promise.reject("no-match")))})}}())});